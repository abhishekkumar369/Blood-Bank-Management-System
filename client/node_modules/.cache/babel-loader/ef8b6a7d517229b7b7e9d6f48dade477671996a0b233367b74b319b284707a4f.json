{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Layout from\"./../../components/shared/Layout/Layout\";import moment from\"moment\";import{useSelector}from\"react-redux\";import API from\"../../services/API\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrganisationPage=function OrganisationPage(){// get current user\nvar _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//find org records\nvar getOrg=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$get,_data,_yield$API$get2,_data2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!((user===null||user===void 0?void 0:user.role)===\"donar\")){_context.next=7;break;}_context.next=4;return API.get(\"/inventory/get-orgnaisation\");case 4:_yield$API$get=_context.sent;_data=_yield$API$get.data;//   console.log(data);\nif(_data!==null&&_data!==void 0&&_data.success){setData(_data===null||_data===void 0?void 0:_data.organisations);}case 7:if(!((user===null||user===void 0?void 0:user.role)===\"hospital\")){_context.next=13;break;}_context.next=10;return API.get(\"/inventory/get-orgnaisation-for-hospital\");case 10:_yield$API$get2=_context.sent;_data2=_yield$API$get2.data;//   console.log(data);\nif(_data2!==null&&_data2!==void 0&&_data2.success){setData(_data2===null||_data2===void 0?void 0:_data2.organisations);}case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function getOrg(){return _ref.apply(this,arguments);};}();useEffect(function(){getOrg();},[user]);return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data===null||data===void 0?void 0:data.map(function(record){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.organisationName}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:record.phone}),/*#__PURE__*/_jsx(\"td\",{children:record.address}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")})]},record._id);})})]})});};export default OrganisationPage;","map":{"version":3,"names":["React","useEffect","useState","Layout","moment","useSelector","API","jsx","_jsx","jsxs","_jsxs","OrganisationPage","_useSelector","state","auth","user","_useState","_useState2","_slicedToArray","data","setData","getOrg","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$get","_data","_yield$API$get2","_data2","wrap","_callee$","_context","prev","next","role","get","sent","success","organisations","t0","console","log","stop","apply","arguments","children","className","scope","map","record","organisationName","email","phone","address","createdAt","format","_id"],"sources":["C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/src/pages/Dashboard/OrganisationPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Layout from \"./../../components/shared/Layout/Layout\";\nimport moment from \"moment\";\nimport { useSelector } from \"react-redux\";\nimport API from \"../../services/API\";\n\nconst OrganisationPage = () => {\n  // get current user\n  const { user } = useSelector((state) => state.auth);\n  const [data, setData] = useState([]);\n  //find org records\n  const getOrg = async () => {\n    try {\n      if (user?.role === \"donar\") {\n        const { data } = await API.get(\"/inventory/get-orgnaisation\");\n        //   console.log(data);\n        if (data?.success) {\n          setData(data?.organisations);\n        }\n      }\n      if (user?.role === \"hospital\") {\n        const { data } = await API.get(\n          \"/inventory/get-orgnaisation-for-hospital\"\n        );\n        //   console.log(data);\n        if (data?.success) {\n          setData(data?.organisations);\n        }\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getOrg();\n  }, [user]);\n\n  return (\n    <Layout>\n      <table className=\"table \">\n        <thead>\n          <tr>\n            <th scope=\"col\">Name</th>\n            <th scope=\"col\">Email</th>\n            <th scope=\"col\">Phone</th>\n            <th scope=\"col\">Address</th>\n            <th scope=\"col\">Date</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data?.map((record) => (\n            <tr key={record._id}>\n              <td>{record.organisationName}</td>\n              <td>{record.email}</td>\n              <td>{record.phone}</td>\n              <td>{record.address}</td>\n              <td>{moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </Layout>\n  );\n};\n\nexport default OrganisationPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}