{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abhishek kumar\\\\OneDrive\\\\Desktop\\\\Bloodbank Project\\\\client\\\\src\\\\components\\\\Routes\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport API from \"../../services/API\";\nimport { getCurrentUser } from \"../../redux/features/auth/authActions\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const dispatch = useDispatch();\n\n  //get user current\n  const getUser = async () => {\n    try {\n      const {\n        data\n      } = await API.get(\"/auth/current-user\");\n      if (data !== null && data !== void 0 && data.success) {\n        dispatch(getCurrentUser(data));\n      }\n    } catch (error) {\n      localStorage.clear();\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    getUser();\n  });\n  if (localStorage.getItem(\"token\")) {\n    return children;\n  } else {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 12\n    }, this);\n  }\n};\n_s(ProtectedRoute, \"rAh3tY+Iv6hWC9AI4Dm+rCbkwNE=\", false, function () {\n  return [useDispatch];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","useEffect","useDispatch","API","getCurrentUser","Navigate","jsxDEV","_jsxDEV","ProtectedRoute","_ref","_s","children","dispatch","getUser","data","get","success","error","localStorage","clear","console","log","getItem","to","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/src/components/Routes/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport API from \"../../services/API\";\nimport { getCurrentUser } from \"../../redux/features/auth/authActions\";\nimport { Navigate } from \"react-router-dom\";\nconst ProtectedRoute = ({ children }) => {\n  const dispatch = useDispatch();\n\n  //get user current\n  const getUser = async () => {\n    try {\n      const { data } = await API.get(\"/auth/current-user\");\n      if (data?.success) {\n        dispatch(getCurrentUser(data));\n      }\n    } catch (error) {\n      localStorage.clear();\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getUser();\n  });\n\n  if (localStorage.getItem(\"token\")) {\n    return children;\n  } else {\n    return <Navigate to=\"/login\" />;\n  }\n};\n\nexport default ProtectedRoute;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,QAAQ,aAAa;AACzC,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,cAAc,QAAQ,uCAAuC;AACtE,SAASC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAC5C,MAAMC,cAAc,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAF,IAAA;EAClC,MAAMG,QAAQ,GAAGV,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMW,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,IAAI;MACF,MAAM;QAAEC;MAAK,CAAC,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,oBAAoB,CAAC;MACpD,IAAID,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEE,OAAO,EAAE;QACjBJ,QAAQ,CAACR,cAAc,CAACU,IAAI,CAAC,CAAC;MAChC;IACF,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,YAAY,CAACC,KAAK,CAAC,CAAC;MACpBC,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;IACpB;EACF,CAAC;EAEDhB,SAAS,CAAC,MAAM;IACdY,OAAO,CAAC,CAAC;EACX,CAAC,CAAC;EAEF,IAAIK,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC,EAAE;IACjC,OAAOX,QAAQ;EACjB,CAAC,MAAM;IACL,oBAAOJ,OAAA,CAACF,QAAQ;MAACkB,EAAE,EAAC;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACjC;AACF,CAAC;AAACjB,EAAA,CAzBIF,cAAc;EAAA,QACDN,WAAW;AAAA;AAAA0B,EAAA,GADxBpB,cAAc;AA2BpB,eAAeA,cAAc;AAAC,IAAAoB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}