{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from\"react\";import Layout from\"../../components/shared/Layout/Layout\";import moment from\"moment\";import API from\"../../services/API\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Consumer=function Consumer(){var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];// Find donor records\nvar getDonars=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$post,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.post(\"/inventory/get-inventory-hospital\",{filters:{inventoryType:\"out\",hospital:user===null||user===void 0?void 0:user._id}});case 3:_yield$API$post=_context.sent;_data=_yield$API$post.data;if(_data!==null&&_data!==void 0&&_data.success){setData(_data===null||_data===void 0?void 0:_data.inventory);console.log(_data);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);})),[user===null||user===void 0?void 0:user._id]);// Include user?._id as a dependency\nuseEffect(function(){getDonars();},[getDonars]);// Include getDonars in the dependency array\nreturn/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Inventory Type\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data===null||data===void 0?void 0:data.map(function(record){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.bloodGroup}),/*#__PURE__*/_jsx(\"td\",{children:record.inventoryType}),/*#__PURE__*/_jsx(\"td\",{children:record.quantity}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")})]},record._id);})})]})})});};export default Consumer;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Layout","moment","API","useSelector","jsx","_jsx","jsxs","_jsxs","Consumer","_useSelector","state","auth","user","_useState","_useState2","_slicedToArray","data","setData","getDonars","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$post","_data","wrap","_callee$","_context","prev","next","post","filters","inventoryType","hospital","_id","sent","success","inventory","console","log","t0","stop","children","className","scope","map","record","bloodGroup","quantity","email","createdAt","format"],"sources":["C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/src/pages/Dashboard/Consumer.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport Layout from \"../../components/shared/Layout/Layout\";\nimport moment from \"moment\";\nimport API from \"../../services/API\";\nimport { useSelector } from \"react-redux\";\n\nconst Consumer = () => {\n  const { user } = useSelector((state) => state.auth);\n  const [data, setData] = useState([]);\n\n  // Find donor records\n  const getDonars = useCallback(async () => {\n    try {\n      const { data } = await API.post(\"/inventory/get-inventory-hospital\", {\n        filters: {\n          inventoryType: \"out\",\n          hospital: user?._id,\n        },\n      });\n      if (data?.success) {\n        setData(data?.inventory);\n        console.log(data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }, [user?._id]); // Include user?._id as a dependency\n\n  useEffect(() => {\n    getDonars();\n  }, [getDonars]); // Include getDonars in the dependency array\n\n  return (\n    <Layout>\n      <div className=\"container mt-4\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Blood Group</th>\n              <th scope=\"col\">Inventory Type</th>\n              <th scope=\"col\">Quantity</th>\n              <th scope=\"col\">Email</th>\n              <th scope=\"col\">Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            {data?.map((record) => (\n              <tr key={record._id}>\n                <td>{record.bloodGroup}</td>\n                <td>{record.inventoryType}</td>\n                <td>{record.quantity}</td>\n                <td>{record.email}</td>\n                <td>{moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Consumer;\n"],"mappings":"qdAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,MAAM,KAAM,uCAAuC,CAC1D,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,OAASC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB,IAAAC,YAAA,CAAiBN,WAAW,CAAC,SAACO,KAAK,QAAK,CAAAA,KAAK,CAACC,IAAI,GAAC,CAA3CC,IAAI,CAAAH,YAAA,CAAJG,IAAI,CACZ,IAAAC,SAAA,CAAwBf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAEpB;AACA,GAAM,CAAAI,SAAS,CAAGnB,WAAW,cAAAoB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,eAAA,CAAAC,KAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEH,CAAA3B,GAAG,CAAC4B,IAAI,CAAC,mCAAmC,CAAE,CACnEC,OAAO,CAAE,CACPC,aAAa,CAAE,KAAK,CACpBC,QAAQ,CAAErB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsB,GAClB,CACF,CAAC,CAAC,QAAAX,eAAA,CAAAI,QAAA,CAAAQ,IAAA,CALMnB,KAAI,CAAAO,eAAA,CAAJP,IAAI,CAMZ,GAAIA,KAAI,SAAJA,KAAI,WAAJA,KAAI,CAAEoB,OAAO,CAAE,CACjBnB,OAAO,CAACD,KAAI,SAAJA,KAAI,iBAAJA,KAAI,CAAEqB,SAAS,CAAC,CACxBC,OAAO,CAACC,GAAG,CAACvB,KAAI,CAAC,CACnB,CAACW,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAa,EAAA,CAAAb,QAAA,aAEDW,OAAO,CAACC,GAAG,CAAAZ,QAAA,CAAAa,EAAM,CAAC,CAAC,yBAAAb,QAAA,CAAAc,IAAA,MAAAnB,OAAA,gBAEtB,GAAE,CAACV,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsB,GAAG,CAAC,CAAC,CAAE;AAEjBrC,SAAS,CAAC,UAAM,CACdqB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAAE;AAEjB,mBACEb,IAAA,CAACL,MAAM,EAAA0C,QAAA,cACLrC,IAAA,QAAKsC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC7BnC,KAAA,UAAOoC,SAAS,CAAC,OAAO,CAAAD,QAAA,eACtBrC,IAAA,UAAAqC,QAAA,cACEnC,KAAA,OAAAmC,QAAA,eACErC,IAAA,OAAIuC,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,aAAW,CAAI,CAAC,cAChCrC,IAAA,OAAIuC,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,gBAAc,CAAI,CAAC,cACnCrC,IAAA,OAAIuC,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,UAAQ,CAAI,CAAC,cAC7BrC,IAAA,OAAIuC,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,OAAK,CAAI,CAAC,cAC1BrC,IAAA,OAAIuC,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,MAAI,CAAI,CAAC,EACvB,CAAC,CACA,CAAC,cACRrC,IAAA,UAAAqC,QAAA,CACG1B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6B,GAAG,CAAC,SAACC,MAAM,qBAChBvC,KAAA,OAAAmC,QAAA,eACErC,IAAA,OAAAqC,QAAA,CAAKI,MAAM,CAACC,UAAU,CAAK,CAAC,cAC5B1C,IAAA,OAAAqC,QAAA,CAAKI,MAAM,CAACd,aAAa,CAAK,CAAC,cAC/B3B,IAAA,OAAAqC,QAAA,CAAKI,MAAM,CAACE,QAAQ,CAAK,CAAC,cAC1B3C,IAAA,OAAAqC,QAAA,CAAKI,MAAM,CAACG,KAAK,CAAK,CAAC,cACvB5C,IAAA,OAAAqC,QAAA,CAAKzC,MAAM,CAAC6C,MAAM,CAACI,SAAS,CAAC,CAACC,MAAM,CAAC,oBAAoB,CAAC,CAAK,CAAC,GALzDL,MAAM,CAACZ,GAMZ,CAAC,EACN,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,CACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAA1B,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}