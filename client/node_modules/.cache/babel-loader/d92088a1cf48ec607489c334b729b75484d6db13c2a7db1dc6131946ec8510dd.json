{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import Spinner from\"../components/shared/Spinner\";import Layout from\"../components/shared/Layout/Layout\";import Modal from\"../components/shared/modal/Modal\";import API from\"../services/API\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useSelector=useSelector(function(state){return state.auth;}),loading=_useSelector.loading,error=_useSelector.error,user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var navigate=useNavigate();//get function\nvar getBloodRecords=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$get,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.get(\"/inventory/get-inventory\");case 3:_yield$API$get=_context.sent;_data=_yield$API$get.data;if(_data!==null&&_data!==void 0&&_data.success){setData(_data===null||_data===void 0?void 0:_data.inventory);// console.log(data);\n}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getBloodRecords(){return _ref.apply(this,arguments);};}();useEffect(function(){getBloodRecords();},[]);return/*#__PURE__*/_jsxs(Layout,{children:[(user===null||user===void 0?void 0:user.role)===\"admin\"&&navigate(\"/admin\"),error&&/*#__PURE__*/_jsx(\"span\",{children:alert(error)}),loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"ms-4\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#staticBackdrop\",style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus text-success py-4\"}),\"Add Inventory\"]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Inventory Type\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Donor Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Time & Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data===null||data===void 0?void 0:data.map(function(record){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.bloodGroup}),/*#__PURE__*/_jsx(\"td\",{children:record.inventoryType}),/*#__PURE__*/_jsxs(\"td\",{children:[record.quantity,\" (ML)\"]}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")})]},record._id);})})]}),/*#__PURE__*/_jsx(Modal,{})]})})]});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useNavigate","Spinner","Layout","Modal","API","moment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomePage","_useSelector","state","auth","loading","error","user","_useState","_useState2","_slicedToArray","data","setData","navigate","getBloodRecords","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$get","_data","wrap","_callee$","_context","prev","next","get","sent","success","inventory","t0","console","log","stop","apply","arguments","children","role","alert","className","style","cursor","scope","map","record","bloodGroup","inventoryType","quantity","email","createdAt","format","_id"],"sources":["C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport Spinner from \"../components/shared/Spinner\";\nimport Layout from \"../components/shared/Layout/Layout\";\nimport Modal from \"../components/shared/modal/Modal\";\nimport API from \"../services/API\";\nimport moment from \"moment\";\n\nconst HomePage = () => {\n  const { loading, error, user } = useSelector((state) => state.auth);\n  const [data, setData] = useState([]);\n  const navigate = useNavigate();\n\n  //get function\n  const getBloodRecords = async () => {\n    try {\n      const { data } = await API.get(\"/inventory/get-inventory\");\n      if (data?.success) {\n        setData(data?.inventory);\n        // console.log(data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getBloodRecords();\n  }, []);\n  return (\n    <Layout>\n      {user?.role === \"admin\" && navigate(\"/admin\")}\n      {error && <span>{alert(error)}</span>}\n      {loading ? (\n        <Spinner />\n      ) : (\n        <>\n          <div className=\"container\">\n            <h4\n              className=\"ms-4\"\n              data-bs-toggle=\"modal\"\n              data-bs-target=\"#staticBackdrop\"\n              style={{ cursor: \"pointer\" }}\n            >\n              <i className=\"fa-solid fa-plus text-success py-4\"></i>\n              Add Inventory\n            </h4>\n            <table className=\"table \">\n              <thead>\n                <tr>\n                  <th scope=\"col\">Blood Group</th>\n                  <th scope=\"col\">Inventory Type</th>\n                  <th scope=\"col\">Quantity</th>\n                  <th scope=\"col\">Donor Email</th>\n                  <th scope=\"col\">Time & Date</th>\n                </tr>\n              </thead>\n              <tbody>\n                {data?.map((record) => (\n                  <tr key={record._id}>\n                    <td>{record.bloodGroup}</td>\n                    <td>{record.inventoryType}</td>\n                    <td>{record.quantity} (ML)</td>\n                    <td>{record.email}</td>\n                    <td>\n                      {moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n\n            <Modal />\n          </div>\n        </>\n      )}\n    </Layout>\n  );\n};\n\nexport default HomePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}