{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk}from\"@reduxjs/toolkit\";import API from\"../../../services/API\";import{toast}from\"react-toastify\";export var userLogin=createAsyncThunk(\"auth/login\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref,_ref2){var role,email,password,rejectWithValue,_yield$API$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:role=_ref.role,email=_ref.email,password=_ref.password;rejectWithValue=_ref2.rejectWithValue;_context.prev=2;_context.next=5;return API.post(\"/auth/login\",{role:role,email:email,password:password});case 5:_yield$API$post=_context.sent;data=_yield$API$post.data;//store token\nif(data.success){alert(data.message);localStorage.setItem(\"token\",data.token);window.location.replace(\"/\");}return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);if(!(_context.t0.response&&_context.t0.response.data.message)){_context.next=17;break;}return _context.abrupt(\"return\",rejectWithValue(_context.t0.response.data.message));case 17:return _context.abrupt(\"return\",rejectWithValue(_context.t0.message));case 18:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function(_x,_x2){return _ref3.apply(this,arguments);};}());//register\nexport var userRegister=createAsyncThunk(\"auth/register\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref4,_ref5){var name,role,email,password,phone,organisationName,address,hospitalName,website,rejectWithValue,_yield$API$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:name=_ref4.name,role=_ref4.role,email=_ref4.email,password=_ref4.password,phone=_ref4.phone,organisationName=_ref4.organisationName,address=_ref4.address,hospitalName=_ref4.hospitalName,website=_ref4.website;rejectWithValue=_ref5.rejectWithValue;_context2.prev=2;_context2.next=5;return API.post(\"/auth/register\",{name:name,role:role,email:email,password:password,phone:phone,organisationName:organisationName,address:address,hospitalName:hospitalName,website:website});case 5:_yield$API$post2=_context2.sent;data=_yield$API$post2.data;if(data!==null&&data!==void 0&&data.success){alert(\"User Registerd Successfully\");window.location.replace(\"/login\");// toast.success(\"User Registerd Successfully\");\n}_context2.next=18;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);if(!(_context2.t0.response&&_context2.t0.response.data.message)){_context2.next=17;break;}return _context2.abrupt(\"return\",rejectWithValue(_context2.t0.response.data.message));case 17:return _context2.abrupt(\"return\",rejectWithValue(_context2.t0.message));case 18:case\"end\":return _context2.stop();}},_callee2,null,[[2,10]]);}));return function(_x3,_x4){return _ref6.apply(this,arguments);};}());//current user\nexport var getCurrentUser=createAsyncThunk(\"auth/getCurrentUser\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref7){var rejectWithValue,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:rejectWithValue=_ref7.rejectWithValue;_context3.prev=1;_context3.next=4;return API.get(\"/auth/current-user\");case 4:res=_context3.sent;if(!res.data){_context3.next=7;break;}return _context3.abrupt(\"return\",res===null||res===void 0?void 0:res.data);case 7:_context3.next=17;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);if(!(_context3.t0.response&&_context3.t0.response.data.message)){_context3.next=16;break;}return _context3.abrupt(\"return\",rejectWithValue(_context3.t0.response.data.message));case 16:return _context3.abrupt(\"return\",rejectWithValue(_context3.t0.message));case 17:case\"end\":return _context3.stop();}},_callee3,null,[[1,9]]);}));return function(_x5){return _ref8.apply(this,arguments);};}());","map":{"version":3,"names":["createAsyncThunk","API","toast","userLogin","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","_ref2","role","email","password","rejectWithValue","_yield$API$post","data","wrap","_callee$","_context","prev","next","post","sent","success","alert","message","localStorage","setItem","token","window","location","replace","abrupt","t0","response","stop","_x","_x2","apply","arguments","userRegister","_ref6","_callee2","_ref4","_ref5","name","phone","organisationName","address","hospitalName","website","_yield$API$post2","_callee2$","_context2","console","log","_x3","_x4","getCurrentUser","_ref8","_callee3","_ref7","res","_callee3$","_context3","get","_x5"],"sources":["C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/src/redux/features/auth/authActions.js"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport API from \"../../../services/API\";\nimport { toast } from \"react-toastify\";\n\nexport const userLogin = createAsyncThunk(\n  \"auth/login\",\n  async ({ role, email, password }, { rejectWithValue }) => {\n    try {\n      const { data } = await API.post(\"/auth/login\", { role, email, password });\n      //store token\n      if (data.success) {\n        alert(data.message);\n        localStorage.setItem(\"token\", data.token);\n        window.location.replace(\"/\");\n      }\n      return data;\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message);\n      } else {\n        return rejectWithValue(error.message);\n      }\n    }\n  }\n);\n\n//register\nexport const userRegister = createAsyncThunk(\n  \"auth/register\",\n  async (\n    {\n      name,\n      role,\n      email,\n      password,\n      phone,\n      organisationName,\n      address,\n      hospitalName,\n      website,\n    },\n    { rejectWithValue }\n  ) => {\n    try {\n      const { data } = await API.post(\"/auth/register\", {\n        name,\n        role,\n        email,\n        password,\n        phone,\n        organisationName,\n        address,\n        hospitalName,\n        website,\n      });\n      if (data?.success) {\n        alert(\"User Registerd Successfully\");\n        window.location.replace(\"/login\");\n        // toast.success(\"User Registerd Successfully\");\n      }\n    } catch (error) {\n      console.log(error);\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message);\n      } else {\n        return rejectWithValue(error.message);\n      }\n    }\n  }\n);\n\n//current user\nexport const getCurrentUser = createAsyncThunk(\n  \"auth/getCurrentUser\",\n  async ({ rejectWithValue }) => {\n    try {\n      const res = await API.get(\"/auth/current-user\");\n      if (res.data) {\n        return res?.data;\n      }\n    } catch (error) {\n      console.log(error);\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message);\n      } else {\n        return rejectWithValue(error.message);\n      }\n    }\n  }\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}