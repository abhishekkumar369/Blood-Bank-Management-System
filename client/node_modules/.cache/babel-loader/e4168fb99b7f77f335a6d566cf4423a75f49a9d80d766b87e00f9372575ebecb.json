{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import{useDispatch}from\"react-redux\";import API from\"../../services/API\";import{getCurrentUser}from\"../../redux/features/auth/authActions\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProtectedRoute=function ProtectedRoute(_ref){var children=_ref.children;var dispatch=useDispatch();//get user current\nvar getUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$API$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.get(\"/auth/current-user\");case 3:_yield$API$get=_context.sent;data=_yield$API$get.data;if(data!==null&&data!==void 0&&data.success){dispatch(getCurrentUser(data));}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);localStorage.clear();console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getUser(){return _ref2.apply(this,arguments);};}();useEffect(function(){getUser();});if(localStorage.getItem(\"token\")){return children;}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useDispatch","API","getCurrentUser","Navigate","jsx","_jsx","ProtectedRoute","_ref","children","dispatch","getUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$API$get","data","wrap","_callee$","_context","prev","next","get","sent","success","t0","localStorage","clear","console","log","stop","apply","arguments","getItem","to"],"sources":["C:/Users/Abhishek kumar/OneDrive/Desktop/Bloodbank Project/client/src/components/Routes/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport API from \"../../services/API\";\nimport { getCurrentUser } from \"../../redux/features/auth/authActions\";\nimport { Navigate } from \"react-router-dom\";\nconst ProtectedRoute = ({ children }) => {\n  const dispatch = useDispatch();\n\n  //get user current\n  const getUser = async () => {\n    try {\n      const { data } = await API.get(\"/auth/current-user\");\n      if (data?.success) {\n        dispatch(getCurrentUser(data));\n      }\n    } catch (error) {\n      localStorage.clear();\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getUser();\n  });\n\n  if (localStorage.getItem(\"token\")) {\n    return children;\n  } else {\n    return <Navigate to=\"/login\" />;\n  }\n};\n\nexport default ProtectedRoute;\n"],"mappings":"8TAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,OAASC,cAAc,KAAQ,uCAAuC,CACtE,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAC5C,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAChC,GAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B;AACA,GAAM,CAAAU,OAAO,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,cAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEW,CAAArB,GAAG,CAACsB,GAAG,CAAC,oBAAoB,CAAC,QAAAP,cAAA,CAAAI,QAAA,CAAAI,IAAA,CAA5CP,IAAI,CAAAD,cAAA,CAAJC,IAAI,CACZ,GAAIA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEQ,OAAO,CAAE,CACjBhB,QAAQ,CAACP,cAAc,CAACe,IAAI,CAAC,CAAC,CAChC,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,aAEDO,YAAY,CAACC,KAAK,CAAC,CAAC,CACpBC,OAAO,CAACC,GAAG,CAAAV,QAAA,CAAAM,EAAM,CAAC,CAAC,yBAAAN,QAAA,CAAAW,IAAA,MAAAhB,OAAA,gBAEtB,kBAVK,CAAAL,OAAOA,CAAA,SAAAC,KAAA,CAAAqB,KAAA,MAAAC,SAAA,OAUZ,CAEDlC,SAAS,CAAC,UAAM,CACdW,OAAO,CAAC,CAAC,CACX,CAAC,CAAC,CAEF,GAAIiB,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC,CAAE,CACjC,MAAO,CAAA1B,QAAQ,CACjB,CAAC,IAAM,CACL,mBAAOH,IAAA,CAACF,QAAQ,EAACgC,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CACF,CAAC,CAED,cAAe,CAAA7B,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}